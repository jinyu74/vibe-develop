# [서비스명] 테스트 케이스 - [버전]

> **서비스**: [service-name]
> **버전**: [version]
> **최종 수정**: [YYYY-MM-DD]

---

## 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| v0.0.1 | YYYY-MM-DD | - | 초기 작성 |

---

## 테스트 전략

### 테스트 피라미드

| 유형 | 비율 | 도구 | 대상 | 실행 시점 |
|------|------|------|------|----------|
| Unit | 70% | (pytest / Jest / go test) | 비즈니스 로직, 유틸리티 | 커밋 전, CI |
| Integration | 20% | (pytest + testcontainers / Supertest) | API + DB 연동 | PR, CI |
| E2E | 10% | Playwright | 핵심 사용자 플로우 | 배포 전 |

### 커버리지 기준

| 대상 | 최소 커버리지 | 비고 |
|------|-------------|------|
| 비즈니스 로직 (domain/) | 80% | 핵심 규칙은 반드시 테스트 |
| API 레이어 (api/) | 70% | 정상 + 주요 에러 경로 |
| 유틸리티 (utils/) | 60% | 엣지 케이스 포함 |
| UI 컴포넌트 | 50% | 인터랙션 위주 |

> 신규 기능 추가 시 해당 기능의 **Unit 테스트가 없으면 PR을 올리지 않는다.**

### 도메인별 테스트 책임

> `CONTEXT.md`의 도메인 배정과 연동. 각 담당자는 자기 도메인의 테스트를 작성한다.

| 도메인 | 담당 | Unit 필수 | Integration 필수 |
|--------|------|----------|-----------------|
| auth | (담당자) | 로그인, 토큰 발급/갱신/만료 | 인증 미들웨어 + DB |
| user | (담당자) | 프로필 조회/수정 규칙 | API + DB |
| (도메인) | (담당자) | (필수 항목) | (필수 항목) |

### 테스트 실행

```bash
# 전체 테스트
pytest tests/

# 단위 테스트만
pytest tests/unit/

# 특정 기능 테스트
pytest tests/ -k "F001"

# 커버리지 포함
pytest tests/ --cov=src --cov-report=html
```

---

## 기능별 테스트 케이스

<!-- PM 기획서의 "검수 기준" / "QA 체크리스트" 슬라이드에서 추출 -->

### F001: [기능명]

#### TC-F001-01: [정상 케이스]

- **유형**: Unit
- **설명**: 올바른 이메일/비밀번호로 로그인 성공
- **사전 조건**: 사용자 계정이 존재
- **입력**:
  - email: "user@example.com"
  - password: "validPassword123"
- **기대 결과**:
  - HTTP 200 반환
  - accessToken, refreshToken 포함
  - expiresIn > 0
- **구현 위치**: `tests/unit/test_auth_service.py`

#### TC-F001-02: [에러 케이스 - 잘못된 비밀번호]

- **유형**: Unit
- **설명**: 잘못된 비밀번호로 로그인 시도
- **사전 조건**: 사용자 계정이 존재
- **입력**:
  - email: "user@example.com"
  - password: "wrongPassword"
- **기대 결과**:
  - HTTP 401 반환
  - 에러 코드: INVALID_CREDENTIALS
- **구현 위치**: `tests/unit/test_auth_service.py`

#### TC-F001-03: [에러 케이스 - 존재하지 않는 계정]

- **유형**: Unit
- **설명**: 미등록 이메일로 로그인 시도
- **입력**:
  - email: "unknown@example.com"
  - password: "anyPassword"
- **기대 결과**:
  - HTTP 401 반환
  - 에러 코드: INVALID_CREDENTIALS (보안상 같은 에러 반환)

#### TC-F001-04: [엣지 케이스 - 로그인 시도 횟수 초과]

- **유형**: Integration
- **설명**: 5회 연속 실패 후 계정 잠금
- **사전 조건**: 사용자 계정 존재, 실패 횟수 0
- **절차**:
  1. 잘못된 비밀번호로 5회 로그인 시도
  2. 6번째 시도
- **기대 결과**:
  - 6번째: HTTP 429 반환
  - 에러 코드: RATE_LIMITED

#### TC-F001-05: [유효성 검사 - 입력값 형식 오류]

- **유형**: Unit
- **설명**: 이메일 형식이 아닌 입력
- **입력**:
  - email: "not-an-email"
  - password: "short"
- **기대 결과**:
  - HTTP 422 반환
  - 에러 코드: VALIDATION_ERROR

---

### F002: [기능명]

(위와 동일한 구조 반복)

---

## 통합 테스트 시나리오

<!-- 여러 기능이 연계되는 플로우 테스트 -->

### IT-001: [시나리오명]

- **설명**: (전체 흐름 설명)
- **관련 기능**: F001, F002
- **절차**:
  1. Step 1
  2. Step 2
  3. Step 3
- **기대 결과**: ...

---

## E2E 테스트 시나리오

<!-- 핵심 사용자 플로우 -->

### E2E-001: [시나리오명]

- **설명**: (사용자 관점의 전체 플로우)
- **관련 화면**: S001 → S002 → S003
- **절차**:
  1. 로그인 페이지 접속
  2. 이메일/비밀번호 입력
  3. 로그인 버튼 클릭
  4. 대시보드 페이지 확인
- **기대 결과**: 대시보드에 사용자 이름 표시

---

## 테스트 데이터

### Fixtures

| 이름 | 용도 | 데이터 |
|------|------|--------|
| valid_user | 정상 사용자 | email: test@example.com, role: user |
| admin_user | 관리자 | email: admin@example.com, role: admin |
| locked_user | 잠긴 계정 | login_attempts: 5 |
