---
description: PM 기획서 PPT를 개발 문서 마크다운으로 변환할 때 적용되는 규칙
globs:
  - docs/**/*.md
alwaysApply: false
---

# 기획 문서 → 마크다운 개발 문서 변환 규칙

## 변환 프로세스

PM으로부터 기획서(PPT/PDF/MD)를 받아 개발 문서로 변환할 때 이 규칙을 따릅니다.

### 0단계: 문서 추출 (텍스트 + 이미지)

원본 기획서에서 텍스트와 이미지를 추출합니다.

**자동 추출 (PPT/PDF 파일이 있는 경우):**

```bash
# 설치 (최초 1회)
pip install -r tools/requirements.txt

# 실행
python tools/extract-doc.py ~/기획서.pptx --service auth --version v1.0.0
python tools/extract-doc.py ~/설계서.pdf --service payment --version v1.0.0
```

추출 결과:
- **텍스트**: 슬라이드/페이지별 구조화된 마크다운 (stdout 출력)
- **이미지**: `docs/{service}/{version}/assets/` 에 자동 저장
- **이미지 목록**: 추출된 이미지 파일명과 매핑 테이블

**수동 추출 (자동 추출이 불가능한 경우):**

1. PPT/PDF에서 텍스트를 복사하여 정리
2. UI 화면 캡처본을 `docs/{service}/{version}/assets/` 에 저장
3. 이미지 파일명을 `S-{화면ID}-{설명}.png` 형식으로 명명

> 추출된 텍스트 + 이미지를 Cursor 채팅에 전달하면서 `@docs/_templates/` 참조를 지정하면 5개 문서로 변환됩니다.

### 1단계: 정보 확인

변환 전 반드시 확인할 정보:
- **서비스명**: 어떤 서비스인지
- **버전**: 몇 번째 버전인지
- **이전 버전 문서 존재 여부**: 있으면 참조하여 연속성 유지
- **기술 스택**: 구현 가이드 작성에 필요
- **추출된 이미지 목록**: `assets/` 에 저장된 UI/디자인 이미지

### 2단계: 템플릿 기반 변환

`docs/_templates/` 폴더의 템플릿을 기반으로 **6개 문서**를 생성합니다.

> `03-api-contract.md`(API 계약서)는 팀 합의용 문서이므로 **초안(Draft)** 상태로 생성합니다.
> 팀 리뷰 → Locked 전환 후에야 구현을 시작할 수 있습니다.

### 3단계: 저장 위치

```
docs/{service-name}/{version}/
├── assets/              ← 추출된 UI 이미지, 화면 캡처
├── 01-requirements.md
├── 02-screen-spec.md
├── 03-api-contract.md   ← 팀 합의 인터페이스 계약 (Draft → Review → Locked)
├── 05-api-spec.md
├── 08-implementation-guide.md
└── 09-test-cases.md
```

## PPT 슬라이드 → 문서 매핑

| PPT 슬라이드 유형 | 변환 대상 문서 | 추출할 정보 |
|-------------------|---------------|------------|
| 프로젝트 개요 | 01-requirements.md | 서비스 목적, 대상 사용자 |
| 기능 요약 / 기능 목록 | 01-requirements.md | 기능 ID, 설명, 우선순위 |
| 화면 설계 / 와이어프레임 | 02-screen-spec.md + assets/ | 화면 구조, 컴포넌트, 상태, UI 이미지 |
| UI 플로우 | 02-screen-spec.md | 화면 간 이동 흐름 |
| UI 목업 이미지 | assets/ → 02-screen-spec.md 참조 | 각 S-ID에 이미지 링크 연결 |
| 비즈니스 로직 | 05-api-spec.md | 엔드포인트, 데이터 흐름 |
| 데이터 모델 | 05-api-spec.md | 엔티티, 관계 |
| 제약조건 / 참고사항 | 08-implementation-guide.md | 아키텍처, 패턴, 주의사항 |
| 검수 기준 / QA 체크리스트 | 09-test-cases.md | 테스트 시나리오, 기대 결과 |

## ID 부여 규칙

### 기능 ID (F-시리즈)

- 형식: `F001`, `F002`, ...
- PPT에서 기능이 명시되지 않은 경우, 논리적 단위로 분리하여 부여
- 우선순위가 높은 기능부터 낮은 번호 부여

### 화면 ID (S-시리즈)

- 형식: `S001`, `S002`, ...
- 사용자 플로우 순서대로 번호 부여
- 모달, 팝업도 별도 ID 부여

### API 엔드포인트 네이밍

- RESTful 규칙 준수: `{METHOD} /api/{version}/{resource}`
- 리소스는 복수형: `/api/v1/users`, `/api/v1/analyses`
- 중첩: `/api/v1/users/{userId}/profiles`

## 변환 시 보완 사항

PPT에 명시되지 않았지만 개발 문서에 반드시 포함해야 할 항목:

1. **에러 처리**: 각 API의 에러 응답 코드와 조건
2. **유효성 검사**: 입력값 형식, 길이, 범위 제한
3. **엣지 케이스**: 빈 값, 최대/최소 경계, 동시 요청
4. **보안 고려사항**: 인증/인가 요구사항
5. **비기능 요구사항**: 성능, 호환성 (PPT에 없으면 미결 사항으로 기록)

## 변환 품질 체크리스트

변환 완료 후 확인:

- [ ] 모든 기능에 F-ID가 부여되었는가
- [ ] 모든 화면에 S-ID가 부여되었는가
- [ ] 기능 ↔ 화면 ↔ API 간 교차 참조가 연결되었는가
- [ ] PPT에 없는 내용은 "미결 사항"으로 명시되었는가
- [ ] 이전 버전 문서가 있으면 변경 이력이 기록되었는가

### 4단계: 변환 결과 검증

문서 생성 후 아래 항목을 검증합니다.

**문서 완성도 검증:**

| # | 검증 항목 | 확인 방법 |
|---|----------|----------|
| 1 | 6개 문서 모두 생성됨 | `docs/{service}/{version}/` 에 01, 02, 03, 05, 08, 09 파일 존재 확인 |
| 2 | 템플릿 필수 섹션 포함 | 각 문서가 `docs/_templates/` 템플릿의 H2 헤더를 모두 포함하는지 확인 |
| 3 | F-ID ↔ S-ID 교차 참조 | `01-requirements.md`의 F-ID가 `02-screen-spec.md`에서 참조됨 |
| 4 | F-ID ↔ API 교차 참조 | `01-requirements.md`의 F-ID가 `05-api-spec.md`에서 관련 기능으로 연결됨 |
| 5 | F-ID ↔ TC 교차 참조 | 각 F-ID에 대해 `09-test-cases.md`에 `TC-{F-ID}-xx` 형식의 TC 존재 |
| 6 | API 계약서 정합성 | `03-api-contract.md`의 공유 타입/에러 코드가 `05-api-spec.md`와 일치 |
| 7 | CONTEXT.md 업데이트 | 서비스 `CONTEXT.md`가 생성 또는 업데이트됨 (도메인 배정 포함) |
| 8 | overview.md 등록 | `docs/overview.md` 서비스 현황 테이블에 해당 서비스가 등록됨 |

검증 실패 항목이 있으면 해당 문서를 보완한 후 다시 확인합니다.

### 5단계: 구현 준비도 체크

변환된 문서로 바로 구현을 시작할 수 있는지 점검합니다.

**구현 준비 기준:**

- [ ] `03-api-contract.md` 상태가 **Locked** (Draft/Review면 구현 불가)
- [ ] `03-api-contract.md`에 도메인별 담당자가 배정됨
- [ ] `08-implementation-guide.md`에 기술 스택(언어, 프레임워크, DB)이 명시됨
- [ ] `08-implementation-guide.md`에 레이어 구조와 코딩 컨벤션이 정의됨
- [ ] `05-api-spec.md`에 최소 1개 이상의 엔드포인트가 요청/응답 포맷과 함께 정의됨
- [ ] `09-test-cases.md`에 최소 1개 이상의 기능 테스트 케이스가 있음
- [ ] 미결 사항(TBD)이 각 문서에서 명확히 목록화되어 있음

**준비 미달 시:**

미결 사항이 구현 시작을 막는 수준이면, PM에게 확인이 필요한 항목 목록을 정리하여 사용자에게 전달합니다.
