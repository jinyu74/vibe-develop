---
description: 프로젝트 전체에 적용되는 개발 컨벤션과 규칙
globs:
alwaysApply: true
---

# 프로젝트 컨벤션

## 핵심 원칙 (AGENTS.md 상세 참조)

1. **문서가 기준이다** — 코드와 문서가 충돌하면 문서를 먼저 확인한다
2. **사람이 기억하지 않는다** — 체크리스트 + CI가 자동 검사한다
3. **누가 해도 같은 품질** — 템플릿, Rules, 검증 프로토콜, CI로 품질을 보장한다

## 프로젝트 구조

이 프로젝트는 멀티 서비스 구조로, 각 서비스별 기획 문서와 소스코드를 관리합니다.

```
vibe-develop/
├── docs/                       # 개발 문서 시스템
│   ├── overview.md             # 전체 서비스 맵 (AI 진입점)
│   ├── _templates/             # 문서 변환 템플릿
│   └── {service}/{version}/    # 서비스별·버전별 문서
├── apps/{service}/             # 서비스별 소스코드
├── .cursor/rules/              # AI 컨텍스트 규칙
├── AGENTS.md                   # AI 행동 지침 (검증/유지보수 포함)
└── thinking/                   # 설계 아이디어 기록
```

## AI 작업 흐름

모든 작업은 다음 흐름을 따릅니다. 세부 절차는 `AGENTS.md`를 참조합니다.

```
1. 컨텍스트 파악    →  AGENTS.md 확인 → 서비스 CONTEXT.md 확인
2. 계약 확인         →  03-api-contract.md가 Locked인지 확인
3. 불확실성 점검    →  명세 부재·모호·충돌 발견 시 "불확실성 대응 프로토콜" 실행
4. 문서 기반 구현    →  관련 문서 6종 참조하며 코드 작성
5. 구현 후 검증      →  AGENTS.md "구현 검증 프로토콜" + "보안 검증" 실행
6. 문서 동기화       →  AGENTS.md "변경사항 추적 및 문서 동기화 프로토콜" 실행
7. 규칙 유지보수     →  필요 시 AGENTS.md "Cursor Rules 유지보수 프로토콜" 실행
```

## 문서 체계

### 문서 유형과 번호

| 번호 | 유형 | 파일명 | 용도 |
|------|------|--------|------|
| 01 | 요구사항 | 01-requirements.md | 기능 목록, 비즈니스 규칙 |
| 02 | 화면설계 | 02-screen-spec.md | UI 구조, 컴포넌트, 상태 |
| 03 | **API 계약서** | 03-api-contract.md | **팀 합의 인터페이스 (Draft→Review→Locked)** |
| 05 | API 스펙 | 05-api-spec.md | 엔드포인트 상세, 요청/응답 |
| 08 | 구현 가이드 | 08-implementation-guide.md | 아키텍처, 패턴, 구현 노트 |
| 09 | 테스트 케이스 | 09-test-cases.md | 테스트 시나리오, 기대 결과 |

### 서비스 작업 시작 시

1. 해당 서비스의 `CONTEXT.md`를 먼저 확인
2. 현재 작업 버전의 문서를 참조
3. 구현 가이드(`08-implementation-guide.md`)의 코딩 컨벤션을 따름

## ID 체계

- 기능 ID: `F001`, `F002`, ... (서비스 내 고유)
- 화면 ID: `S001`, `S002`, ...
- 테스트 케이스 ID: `TC-F001-01` (기능ID 기반)
- 통합 테스트 ID: `IT-001`
- E2E 테스트 ID: `E2E-001`

## 코딩 공통 규칙

- 모든 코드는 한국어 주석이 아닌 **영문** 주석 사용
- 커밋 메시지: `type(scope): description` 형식
  - type: feat, fix, refactor, docs, test, chore
  - scope: 서비스명 또는 도메인
  - 예: `feat(auth): add 2FA login support`
- 에러 메시지는 에러 코드 기반으로 작성 (사용자 메시지와 분리)

## 문서 간 교차 참조

문서 내에서 다른 문서를 참조할 때는 상대 경로 사용:

- 같은 버전 내: `01-requirements.md` > F001
- 다른 버전: `../v0.0.1/01-requirements.md`
- 코드 참조: `apps/{service}/src/domain/auth/`
